<h1>Stories</h1>

<div class="row">
    {{#each stories}}
    <div class="col s12 m4">
        <div class="card">
            <div class="card-image">
                {{#if user}}<!--Only when you log in can you see the Edit chip button-->
                    {{{editIcon user.id ../user.id id}}}<!--Triple curly because it includes html, see helpers/hbs.js for more info-->
                        <!--Because user.id refers to story.user.id, so if we want to parse in the global user from app.js ('res.locals.user')
                        We have to ../user.id-->
                {{/if}}
            </div>
            <div class="card-content center-align">
                <h5>{{title}}</h5>
                <p class="story-text">{{stripTags (truncate body 150)}}</p><!--Call truncate here from helpers/hbs.js and app.js, remember don't use
                                                                parentheses to call arguments. "Body" is the story.body field, here it is one
                                                                of the argument. "150" is the length, see helpers/hbs.js for more info-->
                                                                <!--Use parentheses to wrap (truncate) to call strip Tags on it-->

                                                                <!--Class story-text? See style.css-->
                <br>

                <div class="chip">
                    <img src="{{user.image}}">
                    <a href="/stories/user/{{user.id}}">{{user.firstName}} {{user.lastName}}</a>
                </div>

            </div>
            <div class="card-action center-align">
                <a href="/stories/show/{{id}}" class="btn grey"><i class="fas fa-angle-double-right"></i> Read More</a>
            </div>
        </div>
    </div>
    {{else}}
    <p>No stories found</p>
    {{/each}}
</div>